//menambahkan tabel status pembayaran 
ALTER TABLE pembayaran ADD status_pembayaran varchar(25);

//membuat trigger cek_pembayaran di tabel pembayaran
DELIMITER $$
	CREATE TRIGGER cek_pembayaran BEFORE INSERT ON pembayaran
    FOR EACH ROW
    BEGIN
    DECLARE total_bayar DECIMAL(10,2);
   	DECLARE total_pesanan DECIMAL (10,2);
    SELECT SUM(jumlah) INTO total_bayar FROM pembayaran WHERE pesanan_id = NEW.pesanan_id;
    SELECT total INTO total_pesanan FROM pesanan WHERE id = NEW.pesanan_id;
    IF total_bayar + NEW.jumlah >= total_pesanan THEN
    SET NEW.status_pembayaran = 'Lunas';
    END IF;
    END $$
DELIMITER ;

//menginsert data kedalam tabel pembayaran
INSERT INTO pembayaran (nokuitansi, tanggal, jumlah, ke, pesanan_id, status_pembayaran)
VALUES ('MD001','2023-10-10',18000,2,2,'');

//melihat hasil dari trigger
select * from pembayaran;